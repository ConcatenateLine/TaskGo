<!-- Startup Loader -->
@if (isLoading() || (!isAppReady() && !startupError())) {
  <app-startup-loader />
} @else {
  <!-- Notification Container -->
  <app-notification-container />

  <header class="app-header">
    <div class="app-header__content">
      <h1 class="app-header__title">{{ title() }}</h1>
      <p class="app-header__subtitle">Personal Task Manager</p>
      @if (startupWarnings().length > 0 && !startupError()) {
      <div class="app-header__warnings">
        <span class="warning-icon">⚠️</span>
        <span>{{ startupWarnings().length }} startup warning(s)</span>
      </div>
      }
    </div>
  </header>

  <main class="app-main">
    @if (showTaskCreation()) {
    <app-task-creation-form (taskCreated)="onTaskCreated($event)" (cancelled)="onTaskCreationCancelled()" />
    } @else {
    <app-task-filter-tabs (filterChange)="onFilterChange($event)" />
    <app-task-project-filter (filterChange)="onProjectFilterChange($event)" />
     <app-task-list [statusFilter]="currentFilter()" [projectFilter]="currentProjectFilter()" (createTaskRequested)="onCreateTaskRequested()" (taskDeleted)="onTaskDeleted()"
        (actionError)="onActionError($event)" />
    }
  </main>
}
